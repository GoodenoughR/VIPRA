\doxysection{subcondition\+\_\+attribute.\+hpp}
\hypertarget{subcondition__attribute_8hpp_source}{}\label{subcondition__attribute_8hpp_source}\index{include/vipra/vipra\_behaviors/conditions/subconditions/subcondition\_attribute.hpp@{include/vipra/vipra\_behaviors/conditions/subconditions/subcondition\_attribute.hpp}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00002\ }
\DoxyCodeLine{00003\ \textcolor{preprocessor}{\#include\ "{}vipra/types/idx.hpp"{}}}
\DoxyCodeLine{00004\ }
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ "{}vipra/vipra\_behaviors/attributes/attributes.hpp"{}}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ "{}vipra/vipra\_behaviors/conditions/sub\_condition.hpp"{}}}
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#include\ "{}vipra/vipra\_behaviors/util/class\_types.hpp"{}}}
\DoxyCodeLine{00008\ }
\DoxyCodeLine{00009\ \textcolor{keyword}{namespace\ }VIPRA::Behaviors\ \{}
\DoxyCodeLine{00014\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classVIPRA_1_1Behaviors_1_1SubConditionAttribute}{SubConditionAttribute}}\ \{}
\DoxyCodeLine{00015\ \ \ NON\_DEFAULT\_CONSTRUCTIBLE(\mbox{\hyperlink{classVIPRA_1_1Behaviors_1_1SubConditionAttribute}{SubConditionAttribute}})}
\DoxyCodeLine{00016\ \ \ COPYABLE(\mbox{\hyperlink{classVIPRA_1_1Behaviors_1_1SubConditionAttribute}{SubConditionAttribute}})}
\DoxyCodeLine{00017\ \ \ MOVEABLE(\mbox{\hyperlink{classVIPRA_1_1Behaviors_1_1SubConditionAttribute}{SubConditionAttribute}})}
\DoxyCodeLine{00018\ }
\DoxyCodeLine{00019\ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00020\ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classVIPRA_1_1Behaviors_1_1SubConditionAttribute}{SubConditionAttribute}}(Attribute\ type,\ \mbox{\hyperlink{structVIPRA_1_1Behaviors_1_1CAttributeValue}{CAttributeValue}}\ val,\ \textcolor{keywordtype}{bool}\ negative)}
\DoxyCodeLine{00021\ \ \ \ \ \ \ :\ \_type(type),\ \_value(val),\ \_not(negative)\ \{\}}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00023\ \ \ \textcolor{keywordtype}{void}\ operator()(\textcolor{keyword}{auto}\ pack,\ \textcolor{keyword}{const}\ VIPRA::idxVec\&\ peds,\ std::vector<Target>\ \textcolor{keyword}{const}\&\ targets,}
\DoxyCodeLine{00024\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::vector<bool>\&\ met,\ std::vector<bool>\ \textcolor{keyword}{const}\&\ \textcolor{comment}{/*unused*/},\ BoolOp\ \textcolor{comment}{/*unused*/})\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00025\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\ ped\ :\ peds)\ \{}
\DoxyCodeLine{00026\ \ \ \ \ \ \ \textcolor{keyword}{auto}\ attr\ =\ \mbox{\hyperlink{classVIPRA_1_1Behaviors_1_1AttributeHandling_ad83435c0020218b0423f05ea4b65aaa0}{AttributeHandling::get\_value}}(targets[ped],\ \_type,\ pack);}
\DoxyCodeLine{00027\ }
\DoxyCodeLine{00028\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\_value.type\ ==\ Type::TOWARDS\_LOC\ ||\ \_value.type\ ==\ Type::TOWARDS\_ATTR)\ \{}
\DoxyCodeLine{00029\ \ \ \ \ \ \ \ \ met[ped]\ =\ towards\_compare(attr,\ pack,\ targets[ped].targetIdx);}
\DoxyCodeLine{00030\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00031\ }
\DoxyCodeLine{00032\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\_not)\ \{}
\DoxyCodeLine{00033\ \ \ \ \ \ \ \ \ met[ped]\ =\ \mbox{\hyperlink{classVIPRA_1_1Behaviors_1_1AttributeHandling_ae534d13fab37898338187d0fa434ec52}{AttributeHandling::is\_not\_equal}}(attr,\ \_value,\ pack);}
\DoxyCodeLine{00034\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00035\ }
\DoxyCodeLine{00036\ \ \ \ \ \ \ met[ped]\ =\ \mbox{\hyperlink{classVIPRA_1_1Behaviors_1_1AttributeHandling_a7f605c6b98e7e0156c8d42361983d991}{AttributeHandling::is\_equal}}(attr,\ \_value,\ pack);}
\DoxyCodeLine{00037\ \ \ \ \ \}}
\DoxyCodeLine{00038\ \ \ \}}
\DoxyCodeLine{00039\ }
\DoxyCodeLine{00040\ \ \ [[nodiscard]]\ \textcolor{keyword}{auto}\ individual(\textcolor{keyword}{auto}\ pack,\ VIPRA::idx\ self,\ \mbox{\hyperlink{structVIPRA_1_1Behaviors_1_1Target}{Target}}\ target)\ \textcolor{keyword}{const}\ -\/>\ \textcolor{keywordtype}{bool}\ \{}
\DoxyCodeLine{00041\ \ \ \ \ \textcolor{keyword}{auto}\ attr\ =\ \mbox{\hyperlink{classVIPRA_1_1Behaviors_1_1AttributeHandling_ad83435c0020218b0423f05ea4b65aaa0}{AttributeHandling::get\_value}}(target,\ \_type,\ pack);}
\DoxyCodeLine{00042\ }
\DoxyCodeLine{00043\ \ \ \ \ \textcolor{keywordflow}{if}\ (\_value.type\ ==\ Type::TOWARDS\_LOC\ ||\ \_value.type\ ==\ Type::TOWARDS\_ATTR)\ \{}
\DoxyCodeLine{00044\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ towards\_compare(attr,\ pack,\ self);}
\DoxyCodeLine{00045\ \ \ \ \ \}}
\DoxyCodeLine{00046\ }
\DoxyCodeLine{00047\ \ \ \ \ \textcolor{keywordflow}{if}\ (\_not)\ \{}
\DoxyCodeLine{00048\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classVIPRA_1_1Behaviors_1_1AttributeHandling_ae534d13fab37898338187d0fa434ec52}{AttributeHandling::is\_not\_equal}}(attr,\ \_value,\ pack);}
\DoxyCodeLine{00049\ \ \ \ \ \}}
\DoxyCodeLine{00050\ }
\DoxyCodeLine{00051\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classVIPRA_1_1Behaviors_1_1AttributeHandling_a7f605c6b98e7e0156c8d42361983d991}{AttributeHandling::is\_equal}}(attr,\ \_value,\ pack);}
\DoxyCodeLine{00052\ \ \ \}}
\DoxyCodeLine{00053\ }
\DoxyCodeLine{00054\ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00055\ \ \ Attribute\ \ \ \ \ \ \ \_type;}
\DoxyCodeLine{00056\ \ \ \mbox{\hyperlink{structVIPRA_1_1Behaviors_1_1CAttributeValue}{CAttributeValue}}\ \_value;}
\DoxyCodeLine{00057\ \ \ \textcolor{keywordtype}{bool}\ \ \ \ \ \ \ \ \ \ \ \ \_not;}
\DoxyCodeLine{00058\ }
\DoxyCodeLine{00059\ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ VIPRA::f\_pnt\ TOWARDS\_THRESHOLD\ =\ 0.5F;}
\DoxyCodeLine{00060\ }
\DoxyCodeLine{00061\ \ \ [[nodiscard]]\ \textcolor{keyword}{inline}\ \textcolor{keyword}{auto}\ towards\_compare(\mbox{\hyperlink{structVIPRA_1_1Behaviors_1_1CAttributeValue}{CAttributeValue}}\&\ attr,\ \textcolor{keyword}{auto}\ pack,\ VIPRA::idx\ self)\ \textcolor{keyword}{const}\ -\/>\ \textcolor{keywordtype}{bool}\ \{}
\DoxyCodeLine{00062\ \ \ \ \ \textcolor{keywordflow}{if}\ (\_value.type\ ==\ Type::TOWARDS\_LOC)\ \{}
\DoxyCodeLine{00063\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ towards\_location\_compare(attr,\ pack,\ self);}
\DoxyCodeLine{00064\ \ \ \ \ \}}
\DoxyCodeLine{00065\ }
\DoxyCodeLine{00066\ \ \ \ \ \textcolor{keywordflow}{return}\ towards\_attribute\_compare(attr,\ pack,\ self);}
\DoxyCodeLine{00067\ \ \ \}}
\DoxyCodeLine{00068\ }
\DoxyCodeLine{00069\ \ \ [[nodiscard]]\ \textcolor{keyword}{inline}\ \textcolor{keyword}{auto}\ towards\_location\_compare(\mbox{\hyperlink{structVIPRA_1_1Behaviors_1_1CAttributeValue}{CAttributeValue}}\&\ attr,\ \textcolor{keyword}{auto}\ pack,\ VIPRA::idx\ self)\ \textcolor{keyword}{const}}
\DoxyCodeLine{00070\ \ \ \ \ \ \ -\/>\ \textcolor{keywordtype}{bool}\ \{}
\DoxyCodeLine{00071\ \ \ \ \ attr.type\_check(Type::COORD);}
\DoxyCodeLine{00072\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structVIPRA_1_1f3d}{VIPRA::f3d}}\ selfPos\ =\ pack.pedset.ped\_coords(self);}
\DoxyCodeLine{00073\ \ \ \ \ \textcolor{keyword}{auto}\ \textcolor{keyword}{const}\&\ \ \ \ \ \ loc\ =\ pack.context.locations.at(\_value.\mbox{\hyperlink{structVIPRA_1_1Behaviors_1_1CAttributeValue_ae0964eb1cceefc25f3c309c5b21e062b}{as}}<VIPRA::idx>());}
\DoxyCodeLine{00074\ }
\DoxyCodeLine{00075\ \ \ \ \ \mbox{\hyperlink{structVIPRA_1_1f3d}{VIPRA::f3d}}\ checkDiff;}
\DoxyCodeLine{00076\ \ \ \ \ \mbox{\hyperlink{structVIPRA_1_1f3d}{VIPRA::f3d}}\ endDiff;}
\DoxyCodeLine{00077\ }
\DoxyCodeLine{00078\ \ \ \ \ \textcolor{keywordflow}{switch}\ (\_type)\ \{}
\DoxyCodeLine{00079\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ Attribute::DIMENSIONS:}
\DoxyCodeLine{00080\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ Attribute::STATE:}
\DoxyCodeLine{00081\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ Attribute::LOCATION:}
\DoxyCodeLine{00082\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ Attribute::STATUS:}
\DoxyCodeLine{00083\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ Attribute::POSITION:}
\DoxyCodeLine{00084\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ Attribute::INVALID:}
\DoxyCodeLine{00085\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ TODO(rolland):\ build\ time\ check\ for\ this}}
\DoxyCodeLine{00086\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ std::runtime\_error(}
\DoxyCodeLine{00087\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Towards\ Location\ Compare\ not\ implemented\ for\ this\ "{}}}
\DoxyCodeLine{00088\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}attribute"{}});}
\DoxyCodeLine{00089\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ Attribute::END\_GOAL:}
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ [[fallthrough]];}
\DoxyCodeLine{00091\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ Attribute::CURR\_GOAL:}
\DoxyCodeLine{00092\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (loc.contains(attr.\mbox{\hyperlink{structVIPRA_1_1Behaviors_1_1CAttributeValue_ae0964eb1cceefc25f3c309c5b21e062b}{as}}<\mbox{\hyperlink{structVIPRA_1_1f3d}{VIPRA::f3d}}>()))\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00093\ \ \ \ \ \ \ \ \ checkDiff\ =\ attr.\mbox{\hyperlink{structVIPRA_1_1Behaviors_1_1CAttributeValue_ae0964eb1cceefc25f3c309c5b21e062b}{as}}<\mbox{\hyperlink{structVIPRA_1_1f3d}{VIPRA::f3d}}>()\ -\/\ selfPos;}
\DoxyCodeLine{00094\ \ \ \ \ \ \ \ \ endDiff\ =\ loc.center()\ -\/\ selfPos;}
\DoxyCodeLine{00095\ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ Attribute::VELOCITY:}
\DoxyCodeLine{00096\ \ \ \ \ \ \ \ \ checkDiff\ =\ attr.\mbox{\hyperlink{structVIPRA_1_1Behaviors_1_1CAttributeValue_ae0964eb1cceefc25f3c309c5b21e062b}{as}}<\mbox{\hyperlink{structVIPRA_1_1f3d}{VIPRA::f3d}}>();}
\DoxyCodeLine{00097\ \ \ \ \ \ \ \ \ endDiff\ =\ loc.center()\ -\/\ selfPos;}
\DoxyCodeLine{00098\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00099\ \ \ \ \ \}}
\DoxyCodeLine{00100\ }
\DoxyCodeLine{00101\ \ \ \ \ \textcolor{keywordflow}{return}\ endDiff.\mbox{\hyperlink{structVIPRA_1_1f3d_aff9d06a17b806ab2d284d0a552ed1fde}{dot}}(checkDiff)\ >\ TOWARDS\_THRESHOLD;}
\DoxyCodeLine{00102\ \ \ \}}
\DoxyCodeLine{00103\ }
\DoxyCodeLine{00104\ \ \ [[nodiscard]]\ \textcolor{keyword}{inline}\ \textcolor{keyword}{auto}\ towards\_attribute\_compare(\mbox{\hyperlink{structVIPRA_1_1Behaviors_1_1CAttributeValue}{CAttributeValue}}\&,\ \textcolor{keyword}{auto},\ VIPRA::idx)\ \textcolor{keyword}{const}\ -\/>\ \textcolor{keywordtype}{bool}\ \{}
\DoxyCodeLine{00105\ \ \ \ \ \textcolor{comment}{//\ TODO(rolland):\ implement\ this}}
\DoxyCodeLine{00106\ \ \ \ \ \textcolor{keywordflow}{throw}\ std::runtime\_error(\textcolor{stringliteral}{"{}Towards\ Attribute\ Not\ implemented"{}});}
\DoxyCodeLine{00107\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00108\ \ \ \}}
\DoxyCodeLine{00109\ \};}
\DoxyCodeLine{00110\ \}\ \ \textcolor{comment}{//\ namespace\ VIPRA::Behaviors}}

\end{DoxyCode}
