\doxysection{action.\+hpp}
\hypertarget{action_8hpp_source}{}\label{action_8hpp_source}\index{include/vipra/vipra\_behaviors/actions/action.hpp@{include/vipra/vipra\_behaviors/actions/action.hpp}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#ifndef\ ACTION\_HPP}}
\DoxyCodeLine{00002\ \textcolor{preprocessor}{\#define\ ACTION\_HPP}}
\DoxyCodeLine{00003\ }
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ <optional>}}
\DoxyCodeLine{00005\ }
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ "{}vipra/geometry/f3d.hpp"{}}}
\DoxyCodeLine{00007\ }
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#include\ "{}vipra/vipra\_behaviors/definitions/behavior\_context.hpp"{}}}
\DoxyCodeLine{00009\ \textcolor{preprocessor}{\#include\ "{}vipra/vipra\_behaviors/definitions/sim\_pack.hpp"{}}}
\DoxyCodeLine{00010\ }
\DoxyCodeLine{00011\ \textcolor{preprocessor}{\#include\ "{}vipra/vipra\_behaviors/actions/atom.hpp"{}}}
\DoxyCodeLine{00012\ \textcolor{preprocessor}{\#include\ "{}vipra/vipra\_behaviors/conditions/condition.hpp"{}}}
\DoxyCodeLine{00013\ }
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ "{}vipra/vipra\_behaviors/targets/target\_selector.hpp"{}}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#include\ "{}vipra/vipra\_behaviors/targets/target\_selectors/target\_self.hpp"{}}}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#include\ "{}vipra/vipra\_behaviors/time/time.hpp"{}}}
\DoxyCodeLine{00018\ }
\DoxyCodeLine{00019\ \textcolor{preprocessor}{\#include\ "{}vipra/vipra\_behaviors/util/class\_types.hpp"{}}}
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\#include\ "{}vipra/vipra\_behaviors/util/timed\_latch.hpp"{}}}
\DoxyCodeLine{00021\ }
\DoxyCodeLine{00022\ \textcolor{preprocessor}{\#include\ "{}vipra/vipra\_behaviors/values/numeric\_value.hpp"{}}}
\DoxyCodeLine{00023\ }
\DoxyCodeLine{00024\ \textcolor{keyword}{namespace\ }VIPRA::Behaviors\ \{}
\DoxyCodeLine{00025\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ atom\_t,\ \textcolor{keyword}{typename}\ condition\_t,\ \textcolor{keyword}{typename}\ target\_t>}
\DoxyCodeLine{00026\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classVIPRA_1_1Behaviors_1_1Action}{Action}}\ \{}
\DoxyCodeLine{00027\ \ \ DEFAULT\_CONSTRUCTIBLE(\mbox{\hyperlink{classVIPRA_1_1Behaviors_1_1Action}{Action}})}
\DoxyCodeLine{00028\ \ \ COPYABLE(\mbox{\hyperlink{classVIPRA_1_1Behaviors_1_1Action}{Action}})}
\DoxyCodeLine{00029\ \ \ MOVEABLE(\mbox{\hyperlink{classVIPRA_1_1Behaviors_1_1Action}{Action}})}
\DoxyCodeLine{00030\ }
\DoxyCodeLine{00031\ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00032\ \ \ \textcolor{keywordtype}{void}\ initialize(\textcolor{keyword}{auto}\ pack)\ \{}
\DoxyCodeLine{00033\ \ \ \ \ \textcolor{keywordflow}{if}\ (\_condition)\ \_condition-\/>initialize(pack);}
\DoxyCodeLine{00034\ \ \ \ \ \textcolor{keywordflow}{if}\ (\_duration)\ \_duration-\/>resize(pack.pedset.num\_pedestrians());}
\DoxyCodeLine{00035\ \ \ \}}
\DoxyCodeLine{00036\ }
\DoxyCodeLine{00037\ \ \ \textcolor{keywordtype}{void}\ perform\_action(\textcolor{keyword}{auto}\ pack,\ VIPRA::idxVec\&\ peds,\ std::vector<Target>\ \textcolor{keyword}{const}\&\ targets)\ \{}
\DoxyCodeLine{00038\ \ \ \ \ std::vector<bool>\ conditionMet;}
\DoxyCodeLine{00039\ \ \ \ \ std::for\_each(\_atoms.begin(),\ \_atoms.end(),}
\DoxyCodeLine{00040\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\&](atom\_t\&\ atom)\ \{\ atom(pack,\ peds,\ conditionMet,\ targets);\ \});}
\DoxyCodeLine{00041\ \ \ \}}
\DoxyCodeLine{00042\ \ \ \textcolor{keywordtype}{void}\ perform\_action(\textcolor{keyword}{auto}\ pack,\ \textcolor{keyword}{const}\ VIPRA::idxVec\&\ peds,\ std::vector<bool>\ \textcolor{keyword}{const}\&\ conditionMet,}
\DoxyCodeLine{00043\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::vector<Target>\ \textcolor{keyword}{const}\&\ targets)\ \{}
\DoxyCodeLine{00044\ \ \ \ \ std::for\_each(\_atoms.begin(),\ \_atoms.end(),}
\DoxyCodeLine{00045\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\&](atom\_t\&\ atom)\ \{\ atom(pack,\ peds,\ conditionMet,\ targets);\ \});}
\DoxyCodeLine{00046\ \ \ \}}
\DoxyCodeLine{00047\ }
\DoxyCodeLine{00048\ \ \ \textcolor{keywordtype}{void}\ add\_condition(condition\_t\ \textcolor{keyword}{const}\&\ cond)\ \{\ \_condition\ =\ cond;\ \}}
\DoxyCodeLine{00049\ \ \ \textcolor{keywordtype}{void}\ add\_atom(atom\_t\&\&\ atom)\ \{\ \_atoms.push\_back(atom);\ \}}
\DoxyCodeLine{00050\ \ \ \textcolor{keywordtype}{void}\ add\_target(target\_t\&\&\ target)\ \{\ \_targets\ =\ std::move(target);\ \}}
\DoxyCodeLine{00051\ \ \ \textcolor{keywordtype}{void}\ add\_duration(\mbox{\hyperlink{classVIPRA_1_1Behaviors_1_1NumericValue}{Behaviors::NumericValue}}\ \textcolor{keyword}{const}\&\ duration)\ \{\ \_duration\ =\ \mbox{\hyperlink{classVIPRA_1_1Behaviors_1_1TimedLatchCollection}{TimedLatchCollection}}(duration);\ \}}
\DoxyCodeLine{00052\ }
\DoxyCodeLine{00053\ \ \ [[nodiscard]]\ \textcolor{keyword}{auto}\ has\_condition()\ -\/>\ \textcolor{keywordtype}{bool}\ \{\ \textcolor{keywordflow}{return}\ \_condition.has\_value();\ \}}
\DoxyCodeLine{00054\ \ \ [[nodiscard]]\ \textcolor{keyword}{auto}\ condition()\ -\/>\ std::optional<condition\_t>\&\ \{\ \textcolor{keywordflow}{return}\ \_condition;\ \}}
\DoxyCodeLine{00055\ }
\DoxyCodeLine{00056\ \ \ [[nodiscard]]\ \textcolor{keyword}{auto}\ has\_duration()\ -\/>\ \textcolor{keywordtype}{bool}\ \{\ \textcolor{keywordflow}{return}\ \_duration.has\_value();\ \}}
\DoxyCodeLine{00057\ \ \ [[nodiscard]]\ \textcolor{keyword}{auto}\ duration()\ -\/>\ std::optional<TimedLatchCollection>\&\ \{\ \textcolor{keywordflow}{return}\ \_duration;\ \}}
\DoxyCodeLine{00058\ }
\DoxyCodeLine{00059\ \ \ [[nodiscard]]\ \textcolor{keyword}{auto}\ has\_target()\ -\/>\ \textcolor{keywordtype}{bool}\ \{\ \textcolor{keywordflow}{return}\ \_targets.has\_value();\ \}}
\DoxyCodeLine{00060\ \ \ [[nodiscard]]\ \textcolor{keyword}{auto}\ targets()\ -\/>\ std::optional<target\_t>\&\ \{\ \textcolor{keywordflow}{return}\ \_targets;\ \}}
\DoxyCodeLine{00061\ }
\DoxyCodeLine{00062\ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00063\ \ \ std::vector<atom\_t>\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_atoms;}
\DoxyCodeLine{00064\ \ \ std::optional<condition\_t>\ \ \ \ \ \ \ \ \ \ \_condition;}
\DoxyCodeLine{00065\ \ \ std::optional<TimedLatchCollection>\ \_duration;}
\DoxyCodeLine{00066\ \ \ std::optional<target\_t>\ \ \ \ \ \ \ \ \ \ \ \ \ \_targets;}
\DoxyCodeLine{00067\ \};}
\DoxyCodeLine{00068\ }
\DoxyCodeLine{00069\ \}\ \ \textcolor{comment}{//\ namespace\ VIPRA::Behaviors}}
\DoxyCodeLine{00070\ }
\DoxyCodeLine{00071\ \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}
