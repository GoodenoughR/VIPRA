\doxysection{line.\+hpp}
\hypertarget{line_8hpp_source}{}\label{line_8hpp_source}\index{include/vipra/geometry/line.hpp@{include/vipra/geometry/line.hpp}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00002\ }
\DoxyCodeLine{00003\ \textcolor{preprocessor}{\#include\ "{}vipra/geometry/f3d.hpp"{}}}
\DoxyCodeLine{00004\ }
\DoxyCodeLine{00005\ \textcolor{keyword}{namespace\ }VIPRA::Geometry\ \{}
\DoxyCodeLine{00006\ \textcolor{keyword}{enum\ class}\ Orientation\ \{\ COLLINEAR,\ CLOCKWISE,\ COUNTERCLOCKWISE\ \};}
\DoxyCodeLine{00007\ }
\DoxyCodeLine{00008\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structVIPRA_1_1Geometry_1_1Line}{Line}}\ \{}
\DoxyCodeLine{00009\ \ \ \mbox{\hyperlink{structVIPRA_1_1f3d}{VIPRA::f3d}}\ start;}
\DoxyCodeLine{00010\ \ \ \mbox{\hyperlink{structVIPRA_1_1f3d}{VIPRA::f3d}}\ end;}
\DoxyCodeLine{00011\ }
\DoxyCodeLine{00012\ \ \ \textcolor{comment}{//\ TODO(rolland):\ add\ more\ to\ the\ line\ class}}
\DoxyCodeLine{00013\ \ \ \textcolor{keyword}{constexpr}\ \mbox{\hyperlink{structVIPRA_1_1Geometry_1_1Line}{Line}}(\mbox{\hyperlink{structVIPRA_1_1f3d}{VIPRA::f3d}}\ start,\ \mbox{\hyperlink{structVIPRA_1_1f3d}{VIPRA::f3d}}\ end)\ :\ start(start),\ end(end)\ \{\}}
\DoxyCodeLine{00014\ }
\DoxyCodeLine{00023\ \ \ [[nodiscard]]\ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{structVIPRA_1_1Geometry_1_1Line_acf514a728f44949fbf8e15c14fc4e9d5}{orientation\_to}}(\mbox{\hyperlink{structVIPRA_1_1Geometry_1_1Line}{Line}}\ line,\ \mbox{\hyperlink{structVIPRA_1_1f3d}{VIPRA::f3d}}\ point)\ \textcolor{keyword}{noexcept}\ -\/>\ Orientation\ \{}
\DoxyCodeLine{00024\ \ \ \ \ VIPRA::f\_pnt\ val\ =\ (line.end.y\ -\/\ line.start.y)\ *\ (point.x\ -\/\ line.end.x)\ -\/}
\DoxyCodeLine{00025\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (line.end.x\ -\/\ line.start.x)\ *\ (point.y\ -\/\ line.end.y);}
\DoxyCodeLine{00026\ }
\DoxyCodeLine{00027\ \ \ \ \ \textcolor{keywordflow}{if}\ (val\ >\ 0)\ \textcolor{keywordflow}{return}\ Orientation::CLOCKWISE;}
\DoxyCodeLine{00028\ \ \ \ \ \textcolor{keywordflow}{if}\ (val\ <\ 0)\ \textcolor{keywordflow}{return}\ Orientation::COUNTERCLOCKWISE;}
\DoxyCodeLine{00029\ \ \ \ \ \textcolor{keywordflow}{return}\ Orientation::COLLINEAR;}
\DoxyCodeLine{00030\ \ \ \}}
\DoxyCodeLine{00031\ }
\DoxyCodeLine{00038\ \ \ [[nodiscard]]\ \textcolor{keyword}{inline}\ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{structVIPRA_1_1Geometry_1_1Line_a0287bb5b4c6adf7797fa7f615029ed45}{closest\_point}}(\mbox{\hyperlink{structVIPRA_1_1f3d}{VIPRA::f3d}}\ point)\ \textcolor{keyword}{const}\ \textcolor{keyword}{noexcept}\ -\/>\ \mbox{\hyperlink{structVIPRA_1_1f3d}{VIPRA::f3d}}\ \{}
\DoxyCodeLine{00039\ \ \ \ \ \textcolor{comment}{//\ TODO(rolland):\ verify}}
\DoxyCodeLine{00040\ \ \ \ \ \textcolor{keyword}{const}\ VIPRA::f\_pnt\ lineLength\ =\ start.distance\_to(end);}
\DoxyCodeLine{00041\ \ \ \ \ \textcolor{keyword}{const}\ VIPRA::f\_pnt\ t\ =}
\DoxyCodeLine{00042\ \ \ \ \ \ \ \ \ std::max(0.0,\ std::min(1.0,\ (point\ -\/\ start).dot(end\ -\/\ start)\ /\ (lineLength\ *\ lineLength)));}
\DoxyCodeLine{00043\ \ \ \ \ \textcolor{keywordflow}{return}\ start\ +\ (end\ -\/\ start)\ *\ t;}
\DoxyCodeLine{00044\ \ \ \}}
\DoxyCodeLine{00045\ }
\DoxyCodeLine{00053\ \ \ [[nodiscard]]\ \textcolor{keyword}{inline}\ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{structVIPRA_1_1Geometry_1_1Line_a3606815cd2ef17b3beba041ed11e783c}{is\_point\_on}}(\mbox{\hyperlink{structVIPRA_1_1f3d}{VIPRA::f3d}}\ point)\ \textcolor{keyword}{const}\ -\/>\ \textcolor{keywordtype}{bool}\ \{}
\DoxyCodeLine{00054\ \ \ \ \ \textcolor{keywordflow}{return}\ point.x\ <=\ std::max(start.x,\ end.x)\ \&\&\ point.y\ <=\ std::max(start.y,\ end.y)\ \&\&}
\DoxyCodeLine{00055\ \ \ \ \ \ \ \ \ \ \ \ point.x\ >=\ std::min(start.x,\ end.x)\ \&\&\ point.y\ >=\ std::min(start.y,\ end.y);}
\DoxyCodeLine{00056\ \ \ \}}
\DoxyCodeLine{00057\ }
\DoxyCodeLine{00065\ \ \ [[nodiscard]]\ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{structVIPRA_1_1Geometry_1_1Line_aefad7d31e2973487cb4662275aa0c6c5}{does\_intersect}}(\mbox{\hyperlink{structVIPRA_1_1Geometry_1_1Line}{Line}}\ other)\ \textcolor{keyword}{const}\ \textcolor{keyword}{noexcept}\ -\/>\ \textcolor{keywordtype}{bool}\ \{}
\DoxyCodeLine{00066\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structVIPRA_1_1Geometry_1_1Line_a8d1bdf34a4c3f4add91de6d03173e94f}{do\_intersect}}(*\textcolor{keyword}{this},\ other);}
\DoxyCodeLine{00067\ \ \ \}}
\DoxyCodeLine{00068\ }
\DoxyCodeLine{00076\ \ \ [[nodiscard]]\ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{structVIPRA_1_1Geometry_1_1Line_a836ee004923cecf57e31e5d2b67fb12f}{intersection\_point}}(\mbox{\hyperlink{structVIPRA_1_1Geometry_1_1Line}{Line}}\ other)\ \textcolor{keyword}{const}\ \textcolor{keyword}{noexcept}\ -\/>\ \mbox{\hyperlink{structVIPRA_1_1f3d}{VIPRA::f3d}}\ \{}
\DoxyCodeLine{00077\ \ \ \ \ assert(\mbox{\hyperlink{structVIPRA_1_1Geometry_1_1Line_aefad7d31e2973487cb4662275aa0c6c5}{does\_intersect}}(other));}
\DoxyCodeLine{00078\ }
\DoxyCodeLine{00079\ \ \ \ \ \textcolor{keyword}{const}\ VIPRA::f\_pnt\ a1\ =\ end.y\ -\/\ start.y;}
\DoxyCodeLine{00080\ \ \ \ \ \textcolor{keyword}{const}\ VIPRA::f\_pnt\ b1\ =\ start.x\ -\/\ end.x;}
\DoxyCodeLine{00081\ \ \ \ \ \textcolor{keyword}{const}\ VIPRA::f\_pnt\ c1\ =\ a1\ *\ start.x\ +\ b1\ *\ start.y;}
\DoxyCodeLine{00082\ }
\DoxyCodeLine{00083\ \ \ \ \ \textcolor{keyword}{const}\ VIPRA::f\_pnt\ a2\ =\ other.end.y\ -\/\ other.start.y;}
\DoxyCodeLine{00084\ \ \ \ \ \textcolor{keyword}{const}\ VIPRA::f\_pnt\ b2\ =\ other.start.x\ -\/\ other.end.x;}
\DoxyCodeLine{00085\ \ \ \ \ \textcolor{keyword}{const}\ VIPRA::f\_pnt\ c2\ =\ a2\ *\ other.start.x\ +\ b2\ *\ other.start.y;}
\DoxyCodeLine{00086\ }
\DoxyCodeLine{00087\ \ \ \ \ \textcolor{keyword}{const}\ VIPRA::f\_pnt\ determinant\ =\ a1\ *\ b2\ -\/\ a2\ *\ b1;}
\DoxyCodeLine{00088\ }
\DoxyCodeLine{00089\ \ \ \ \ \textcolor{keywordflow}{if}\ (determinant\ ==\ 0)\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structVIPRA_1_1f3d}{VIPRA::f3d}}\{0,\ 0,\ 0\};}
\DoxyCodeLine{00090\ }
\DoxyCodeLine{00091\ \ \ \ \ \textcolor{keyword}{const}\ VIPRA::f\_pnt\ x\ =\ (b2\ *\ c1\ -\/\ b1\ *\ c2)\ /\ determinant;}
\DoxyCodeLine{00092\ \ \ \ \ \textcolor{keyword}{const}\ VIPRA::f\_pnt\ y\ =\ (a1\ *\ c2\ -\/\ a2\ *\ c1)\ /\ determinant;}
\DoxyCodeLine{00093\ }
\DoxyCodeLine{00094\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structVIPRA_1_1f3d}{VIPRA::f3d}}\{x,\ y,\ 0\};}
\DoxyCodeLine{00095\ \ \ \}}
\DoxyCodeLine{00096\ }
\DoxyCodeLine{00105\ \ \ [[nodiscard]]\ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{structVIPRA_1_1Geometry_1_1Line_a8d1bdf34a4c3f4add91de6d03173e94f}{do\_intersect}}(\mbox{\hyperlink{structVIPRA_1_1Geometry_1_1Line}{Line}}\ line1,\ \mbox{\hyperlink{structVIPRA_1_1Geometry_1_1Line}{Line}}\ line2)\ \textcolor{keyword}{noexcept}\ -\/>\ \textcolor{keywordtype}{bool}\ \{}
\DoxyCodeLine{00106\ \ \ \ \ \textcolor{keyword}{const}\ Orientation\ ori1\ =\ \mbox{\hyperlink{structVIPRA_1_1Geometry_1_1Line_acf514a728f44949fbf8e15c14fc4e9d5}{orientation\_to}}(line1,\ line2.start);}
\DoxyCodeLine{00107\ \ \ \ \ \textcolor{keyword}{const}\ Orientation\ ori2\ =\ \mbox{\hyperlink{structVIPRA_1_1Geometry_1_1Line_acf514a728f44949fbf8e15c14fc4e9d5}{orientation\_to}}(line1,\ line2.end);}
\DoxyCodeLine{00108\ \ \ \ \ \textcolor{keyword}{const}\ Orientation\ ori3\ =\ \mbox{\hyperlink{structVIPRA_1_1Geometry_1_1Line_acf514a728f44949fbf8e15c14fc4e9d5}{orientation\_to}}(line2,\ line1.start);}
\DoxyCodeLine{00109\ \ \ \ \ \textcolor{keyword}{const}\ Orientation\ ori4\ =\ \mbox{\hyperlink{structVIPRA_1_1Geometry_1_1Line_acf514a728f44949fbf8e15c14fc4e9d5}{orientation\_to}}(line2,\ line1.end);}
\DoxyCodeLine{00110\ }
\DoxyCodeLine{00111\ \ \ \ \ \textcolor{keywordflow}{if}\ (ori1\ !=\ ori2\ \&\&\ ori3\ !=\ ori4)\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00112\ }
\DoxyCodeLine{00113\ \ \ \ \ \textcolor{keywordflow}{if}\ (ori1\ ==\ Orientation::COLLINEAR\ \&\&\ line1.is\_point\_on(line2.start))\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00114\ \ \ \ \ \textcolor{keywordflow}{if}\ (ori2\ ==\ Orientation::COLLINEAR\ \&\&\ line1.is\_point\_on(line2.end))\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00115\ \ \ \ \ \textcolor{keywordflow}{if}\ (ori3\ ==\ Orientation::COLLINEAR\ \&\&\ line2.is\_point\_on(line1.start))\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00116\ \ \ \ \ \textcolor{keywordflow}{if}\ (ori4\ ==\ Orientation::COLLINEAR\ \&\&\ line2.is\_point\_on(line1.end))\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00117\ }
\DoxyCodeLine{00118\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00119\ \ \ \}}
\DoxyCodeLine{00120\ }
\DoxyCodeLine{00121\ \ \ \textcolor{keyword}{constexpr}\ \mbox{\hyperlink{structVIPRA_1_1Geometry_1_1Line}{Line}}()\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00122\ \ \ \textcolor{keyword}{constexpr}\ \mbox{\hyperlink{structVIPRA_1_1Geometry_1_1Line}{\string~Line}}()\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00123\ \ \ \textcolor{keyword}{constexpr}\ \mbox{\hyperlink{structVIPRA_1_1Geometry_1_1Line}{Line}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structVIPRA_1_1Geometry_1_1Line}{Line}}\&)\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00124\ \ \ \textcolor{keyword}{constexpr}\ \mbox{\hyperlink{structVIPRA_1_1Geometry_1_1Line}{Line}}(\mbox{\hyperlink{structVIPRA_1_1Geometry_1_1Line}{Line}}\&\&)\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00125\ \ \ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{auto}\ operator=(\textcolor{keyword}{const}\ \mbox{\hyperlink{structVIPRA_1_1Geometry_1_1Line}{Line}}\&)\ -\/>\ \mbox{\hyperlink{structVIPRA_1_1Geometry_1_1Line}{Line}}\&\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00126\ \ \ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{auto}\ operator=(\mbox{\hyperlink{structVIPRA_1_1Geometry_1_1Line}{Line}}\&\&)\ -\/>\ \mbox{\hyperlink{structVIPRA_1_1Geometry_1_1Line}{Line}}\&\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00127\ \};}
\DoxyCodeLine{00128\ \}\ \ \textcolor{comment}{//\ namespace\ VIPRA::Geometry}}

\end{DoxyCode}
