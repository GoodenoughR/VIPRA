\doxysection{human\+\_\+behavior.\+hpp}
\hypertarget{human__behavior_8hpp_source}{}\label{human__behavior_8hpp_source}\index{include/vipra/vipra\_behaviors/behavior/human\_behavior.hpp@{include/vipra/vipra\_behaviors/behavior/human\_behavior.hpp}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00002\ }
\DoxyCodeLine{00003\ \textcolor{preprocessor}{\#include\ "{}vipra/concepts/goals.hpp"{}}}
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ "{}vipra/concepts/map.hpp"{}}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ "{}vipra/concepts/pedset.hpp"{}}}
\DoxyCodeLine{00006\ }
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#include\ "{}vipra/geometry/f3d.hpp"{}}}
\DoxyCodeLine{00008\ }
\DoxyCodeLine{00009\ \textcolor{preprocessor}{\#include\ "{}vipra/vipra\_behaviors/actions/action.hpp"{}}}
\DoxyCodeLine{00010\ \textcolor{preprocessor}{\#include\ "{}vipra/vipra\_behaviors/conditions/sub\_condition.hpp"{}}}
\DoxyCodeLine{00011\ \textcolor{preprocessor}{\#include\ "{}vipra/vipra\_behaviors/definitions/behavior\_context.hpp"{}}}
\DoxyCodeLine{00012\ \textcolor{preprocessor}{\#include\ "{}vipra/vipra\_behaviors/definitions/dsl\_types.hpp"{}}}
\DoxyCodeLine{00013\ \textcolor{preprocessor}{\#include\ "{}vipra/vipra\_behaviors/events/event.hpp"{}}}
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ "{}vipra/vipra\_behaviors/locations/location.hpp"{}}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#include\ "{}vipra/vipra\_behaviors/selectors/selector.hpp"{}}}
\DoxyCodeLine{00016\ \textcolor{preprocessor}{\#include\ "{}vipra/vipra\_behaviors/selectors/subselector.hpp"{}}}
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#include\ "{}vipra/vipra\_behaviors/targets/target.hpp"{}}}
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#include\ "{}vipra/vipra\_behaviors/targets/target\_modifier.hpp"{}}}
\DoxyCodeLine{00019\ }
\DoxyCodeLine{00020\ \textcolor{keyword}{namespace\ }VIPRA::Behaviors\ \{}
\DoxyCodeLine{00024\ \textcolor{keyword}{template}\ <Concepts::PedsetModule\ pedset\_t,\ Concepts::MapModule\ map\_t,\ Concepts::GoalsModule\ goals\_t>}
\DoxyCodeLine{00025\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classVIPRA_1_1Behaviors_1_1HumanBehavior}{HumanBehavior}}\ \{}
\DoxyCodeLine{00026\ \ \ DEFAULT\_CONSTRUCTIBLE(\mbox{\hyperlink{classVIPRA_1_1Behaviors_1_1HumanBehavior}{HumanBehavior}})}
\DoxyCodeLine{00027\ \ \ COPYABLE(\mbox{\hyperlink{classVIPRA_1_1Behaviors_1_1HumanBehavior}{HumanBehavior}})}
\DoxyCodeLine{00028\ \ \ MOVEABLE(\mbox{\hyperlink{classVIPRA_1_1Behaviors_1_1HumanBehavior}{HumanBehavior}})}
\DoxyCodeLine{00029\ }
\DoxyCodeLine{00030\ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00031\ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{structVIPRA_1_1Behaviors_1_1Simpack}{pack\_t}}\ =\ \mbox{\hyperlink{structVIPRA_1_1Behaviors_1_1Simpack}{Simpack<pedset\_t,\ map\_t,\ goals\_t>}};}
\DoxyCodeLine{00032\ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{structVIPRA_1_1Behaviors_1_1BehaviorContext}{context\_t}}\ =\ \mbox{\hyperlink{structVIPRA_1_1Behaviors_1_1BehaviorContext}{BehaviorContext<pedset\_t,\ map\_t,\ goals\_t>}};}
\DoxyCodeLine{00033\ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{classVIPRA_1_1Behaviors_1_1Condition}{cond\_t}}\ =\ \mbox{\hyperlink{classVIPRA_1_1Behaviors_1_1Condition}{Condition<SubCondition<pack\_t>}}>;}
\DoxyCodeLine{00034\ }
\DoxyCodeLine{00035\ \ \ \textcolor{keyword}{using\ }targetfunc\_t\ =\ TargetFunc<pack\_t>;}
\DoxyCodeLine{00036\ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{classVIPRA_1_1Behaviors_1_1TargetModifier}{targetmodifier\_t}}\ =\ \mbox{\hyperlink{classVIPRA_1_1Behaviors_1_1TargetModifier}{TargetModifier<Modifier<pack\_t>}}>;}
\DoxyCodeLine{00037\ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{classVIPRA_1_1Behaviors_1_1TargetSelector}{targetselector\_t}}\ =\ \mbox{\hyperlink{classVIPRA_1_1Behaviors_1_1TargetSelector}{TargetSelector<TargetFunc<pack\_t>}}>;}
\DoxyCodeLine{00038\ \ \ \textcolor{keyword}{using\ }atom\_t\ =\ Atom<pack\_t>;}
\DoxyCodeLine{00039\ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{classVIPRA_1_1Behaviors_1_1Action}{action\_t}}\ =\ \mbox{\hyperlink{classVIPRA_1_1Behaviors_1_1Action}{Action<atom\_t,\ cond\_t,\ targetselector\_t>}};}
\DoxyCodeLine{00040\ }
\DoxyCodeLine{00041\ \ \ \textcolor{keyword}{using\ }selectorfunc\_t\ =\ SelectorFunc<pack\_t>;}
\DoxyCodeLine{00042\ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{classVIPRA_1_1Behaviors_1_1SubSelector}{subselector\_t}}\ =\ \mbox{\hyperlink{classVIPRA_1_1Behaviors_1_1SubSelector}{SubSelector<SelectorFunc<pack\_t>}},\ \mbox{\hyperlink{classVIPRA_1_1Behaviors_1_1Condition}{cond\_t}}>;}
\DoxyCodeLine{00043\ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{classVIPRA_1_1Behaviors_1_1Selector}{selector\_t}}\ =\ \mbox{\hyperlink{classVIPRA_1_1Behaviors_1_1Selector}{Selector<subselector\_t,\ context\_t>}};}
\DoxyCodeLine{00044\ }
\DoxyCodeLine{00045\ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{classVIPRA_1_1Behaviors_1_1Event}{event\_t}}\ =\ \mbox{\hyperlink{classVIPRA_1_1Behaviors_1_1Event}{Event<cond\_t>}};}
\DoxyCodeLine{00046\ }
\DoxyCodeLine{00047\ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classVIPRA_1_1Behaviors_1_1HumanBehavior}{HumanBehavior}}(std::string\ behaviorName)\ :\ \_name(std::move(behaviorName)),\ \_context()\ \{\}}
\DoxyCodeLine{00048\ }
\DoxyCodeLine{00049\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classVIPRA_1_1Behaviors_1_1HumanBehavior_a174088047c2f1769dddbf4353f1ee369}{initialize}}(pedset\_t\ \textcolor{keyword}{const}\&\ pedset,\ map\_t\ \textcolor{keyword}{const}\&\ map,\ goals\_t\&\ goals);}
\DoxyCodeLine{00050\ \ \ \textcolor{keywordtype}{void}\ timestep(pedset\_t\&\ pedset,\ map\_t\&\ map,\ goals\_t\&\ goals,\ \mbox{\hyperlink{structVIPRA_1_1State}{VIPRA::State}}\&\ state,\ VIPRA::delta\_t\ deltaT);}
\DoxyCodeLine{00051\ }
\DoxyCodeLine{00052\ \ \ \textcolor{keywordtype}{void}\ set\_all\_ped\_types(\mbox{\hyperlink{classVIPRA_1_1Behaviors_1_1Ptype}{Ptype}}\ types)\ \{}
\DoxyCodeLine{00053\ \ \ \ \ \_selector.set\_all\_types(types);}
\DoxyCodeLine{00054\ \ \ \ \ \_actions.resize(types.\mbox{\hyperlink{classVIPRA_1_1Behaviors_1_1Ptype_adb9a2ccc37a5a0f9aa2d1f83b3337076}{type\_count}}()\ +\ 1);}
\DoxyCodeLine{00055\ \ \ \}}
\DoxyCodeLine{00056\ \ \ \textcolor{keywordtype}{void}\ add\_sub\_selector(\textcolor{keyword}{auto}\ \textcolor{keyword}{const}\&\ subSelector)\ \{\ \_selector.add\_sub\_selector(subSelector);\ \}}
\DoxyCodeLine{00057\ \ \ \textcolor{keywordtype}{void}\ add\_action(typeUID\ type,\ \textcolor{keyword}{auto}\ \textcolor{keyword}{const}\&\ action)\ \{\ \_actions[type].emplace\_back(action);\ \}}
\DoxyCodeLine{00058\ \ \ \textcolor{keyword}{auto}\ add\_event(\mbox{\hyperlink{classVIPRA_1_1Behaviors_1_1Event}{event\_t}}\ \textcolor{keyword}{const}\&\ evnt)\ -\/>\ VIPRA::idx\ \{}
\DoxyCodeLine{00059\ \ \ \ \ \_context.events.push\_back(evnt);}
\DoxyCodeLine{00060\ \ \ \ \ \textcolor{keywordflow}{return}\ \_context.events.size()\ -\/\ 1;}
\DoxyCodeLine{00061\ \ \ \}}
\DoxyCodeLine{00062\ \ \ \textcolor{keyword}{auto}\ add\_location(\mbox{\hyperlink{classVIPRA_1_1Behaviors_1_1Location}{Location}}\ \textcolor{keyword}{const}\&\ loc)\ -\/>\ VIPRA::idx\ \{}
\DoxyCodeLine{00063\ \ \ \ \ \_context.locations.emplace\_back(loc);}
\DoxyCodeLine{00064\ \ \ \ \ \textcolor{keywordflow}{return}\ \_context.locations.size()\ -\/\ 1;}
\DoxyCodeLine{00065\ \ \ \}}
\DoxyCodeLine{00066\ }
\DoxyCodeLine{00067\ \ \ [[nodiscard]]\ \textcolor{keyword}{auto}\ get\_name()\ \textcolor{keyword}{const}\ \textcolor{keyword}{noexcept}\ -\/>\ std::string\ \textcolor{keyword}{const}\&\ \{\ \textcolor{keywordflow}{return}\ \_name;\ \}}
\DoxyCodeLine{00068\ \ \ [[nodiscard]]\ \textcolor{keyword}{auto}\ event\_count()\ \textcolor{keyword}{const}\ \textcolor{keyword}{noexcept}\ -\/>\ VIPRA::size\ \{\ \textcolor{keywordflow}{return}\ \_context.events.size();\ \}}
\DoxyCodeLine{00069\ \ \ [[nodiscard]]\ \textcolor{keyword}{auto}\ location\_count()\ \textcolor{keyword}{const}\ \textcolor{keyword}{noexcept}\ -\/>\ VIPRA::size\ \{\ \textcolor{keywordflow}{return}\ \_context.locations.size();\ \}}
\DoxyCodeLine{00070\ \ \ [[nodiscard]]\ \textcolor{keyword}{auto}\ selector\_count()\ \textcolor{keyword}{noexcept}\ -\/>\ VIPRA::size\ \{\ \textcolor{keywordflow}{return}\ \_selector.selector\_count();\ \}}
\DoxyCodeLine{00071\ \ \ [[nodiscard]]\ \textcolor{keyword}{auto}\ action\_count()\ \textcolor{keyword}{const}\ \textcolor{keyword}{noexcept}\ -\/>\ VIPRA::size\ \{}
\DoxyCodeLine{00072\ \ \ \ \ \textcolor{keywordflow}{return}\ std::accumulate(\_actions.begin(),\ \_actions.end(),\ 0,}
\DoxyCodeLine{00073\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [](VIPRA::size\ sum,\ \textcolor{keyword}{auto}\ \textcolor{keyword}{const}\&\ group)\ \{\ return\ sum\ +\ group.size();\ \});}
\DoxyCodeLine{00074\ \ \ \}}
\DoxyCodeLine{00075\ }
\DoxyCodeLine{00076\ \ \ \textcolor{keywordtype}{void}\ set\_seed(VIPRA::seed\ seed)\ \{\ \_seedNum\ =\ seed;\ \}}
\DoxyCodeLine{00077\ }
\DoxyCodeLine{00078\ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00079\ \ \ VIPRA::seed\ \_seedNum\{\};}
\DoxyCodeLine{00080\ }
\DoxyCodeLine{00081\ \ \ std::string\ \_name;}
\DoxyCodeLine{00082\ \ \ \mbox{\hyperlink{structVIPRA_1_1Behaviors_1_1BehaviorContext}{context\_t}}\ \ \ \_context;}
\DoxyCodeLine{00083\ }
\DoxyCodeLine{00084\ \ \ \mbox{\hyperlink{classVIPRA_1_1Behaviors_1_1Selector}{Selector<subselector\_t,\ context\_t>}}\ \_selector;}
\DoxyCodeLine{00085\ \ \ std::vector<std::vector<action\_t>>\ \_actions;}
\DoxyCodeLine{00086\ \ \ std::vector<bool>\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_conditionMet;}
\DoxyCodeLine{00087\ \ \ std::vector<Target>\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_targets;}
\DoxyCodeLine{00088\ }
\DoxyCodeLine{00089\ \ \ \textcolor{keywordtype}{void}\ evaluate\_events(pedset\_t\&\ pedset,\ map\_t\&\ map,\ goals\_t\&\ goals,\ VIPRA::delta\_t\ deltaT);}
\DoxyCodeLine{00090\ \ \ \textcolor{keywordtype}{void}\ apply\_actions(pedset\_t\&\ pedset,\ map\_t\&\ map,\ goals\_t\&\ goals,\ \mbox{\hyperlink{structVIPRA_1_1State}{VIPRA::State}}\&\ state,}
\DoxyCodeLine{00091\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ VIPRA::delta\_t\ deltaT);}
\DoxyCodeLine{00092\ \};}
\DoxyCodeLine{00093\ }
\DoxyCodeLine{00101\ \textcolor{keyword}{template}\ <Concepts::PedsetModule\ pedset\_t,\ Concepts::MapModule\ map\_t,\ Concepts::GoalsModule\ goals\_t>}
\DoxyCodeLine{00102\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classVIPRA_1_1Behaviors_1_1HumanBehavior_a174088047c2f1769dddbf4353f1ee369}{HumanBehavior<pedset\_t,\ map\_t,\ goals\_t>::initialize}}(pedset\_t\ \textcolor{keyword}{const}\&\ pedset,\ map\_t\ \textcolor{keyword}{const}\&\ map,}
\DoxyCodeLine{00103\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ goals\_t\&\ goals)\ \{}
\DoxyCodeLine{00104\ \ \ \mbox{\hyperlink{structVIPRA_1_1State}{VIPRA::State}}\ dummyState;}
\DoxyCodeLine{00105\ }
\DoxyCodeLine{00106\ \ \ \_context.engine\ =\ \mbox{\hyperlink{classVIPRA_1_1Random_1_1Engine}{VIPRA::Random::Engine}}\{\_seedNum\};}
\DoxyCodeLine{00107\ \ \ \_context.pedStates\ =\ std::vector<Behaviors::stateUID>(pedset.num\_pedestrians());}
\DoxyCodeLine{00108\ \ \ \_context.types\ =\ std::vector<Behaviors::typeUID>(pedset.num\_pedestrians());}
\DoxyCodeLine{00109\ }
\DoxyCodeLine{00110\ \ \ \_conditionMet.resize(pedset.num\_pedestrians(),\ \textcolor{keyword}{false});}
\DoxyCodeLine{00111\ \ \ \_targets.resize(pedset.num\_pedestrians());}
\DoxyCodeLine{00112\ \ \ \textcolor{keywordflow}{for}\ (VIPRA::idx\ i\ =\ 0;\ i\ <\ pedset.num\_pedestrians();\ ++i)\ \{}
\DoxyCodeLine{00113\ \ \ \ \ \_targets[i]\ =\ \mbox{\hyperlink{structVIPRA_1_1Behaviors_1_1Target}{Target}}\{TargetType::PEDESTRIAN,\ i\};}
\DoxyCodeLine{00114\ \ \ \}}
\DoxyCodeLine{00115\ }
\DoxyCodeLine{00116\ \ \ \mbox{\hyperlink{structVIPRA_1_1Behaviors_1_1Simpack}{Simpack<pedset\_t,\ map\_t,\ goals\_t>}}\ pack\{pedset,\ map,\ goals,\ \_selector.get\_groups(),\ \_context,\ dummyState,\ 0\};}
\DoxyCodeLine{00117\ \ \ \_selector.initialize(\_name,\ pack);}
\DoxyCodeLine{00118\ }
\DoxyCodeLine{00119\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\&\ actionGroup\ :\ \_actions)\ \{}
\DoxyCodeLine{00120\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\&\ action\ :\ actionGroup)\ \{}
\DoxyCodeLine{00121\ \ \ \ \ \ \ action.initialize(pack);}
\DoxyCodeLine{00122\ \ \ \ \ \}}
\DoxyCodeLine{00123\ \ \ \}}
\DoxyCodeLine{00124\ \}}
\DoxyCodeLine{00125\ }
\DoxyCodeLine{00138\ \textcolor{keyword}{template}\ <Concepts::PedsetModule\ pedset\_t,\ Concepts::MapModule\ map\_t,\ Concepts::GoalsModule\ goals\_t>}
\DoxyCodeLine{00139\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classVIPRA_1_1Behaviors_1_1HumanBehavior_a06a4fc91a153d82979c19c3c96fa375f}{HumanBehavior<pedset\_t,\ map\_t,\ goals\_t>::timestep}}(pedset\_t\&\ pedset,\ map\_t\&\ map,\ goals\_t\&\ goals,}
\DoxyCodeLine{00140\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structVIPRA_1_1State}{VIPRA::State}}\&\ state,\ VIPRA::delta\_t\ deltaT)\ \{}
\DoxyCodeLine{00141\ \ \ evaluate\_events(pedset,\ map,\ goals,\ deltaT);}
\DoxyCodeLine{00142\ \ \ apply\_actions(pedset,\ map,\ goals,\ state,\ deltaT);}
\DoxyCodeLine{00143\ \ \ \_context.elapsedTime\ +=\ deltaT;}
\DoxyCodeLine{00144\ \}}
\DoxyCodeLine{00145\ }
\DoxyCodeLine{00146\ \textcolor{keyword}{template}\ <Concepts::PedsetModule\ pedset\_t,\ Concepts::MapModule\ map\_t,\ Concepts::GoalsModule\ goals\_t>}
\DoxyCodeLine{00147\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classVIPRA_1_1Behaviors_1_1HumanBehavior}{HumanBehavior<pedset\_t,\ map\_t,\ goals\_t>::evaluate\_events}}(pedset\_t\&\ pedset,\ map\_t\&\ map,\ goals\_t\&\ goals,}
\DoxyCodeLine{00148\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ VIPRA::delta\_t\ deltaT)\ \{}
\DoxyCodeLine{00149\ \ \ \mbox{\hyperlink{structVIPRA_1_1State}{VIPRA::State}}\ dummyState;}
\DoxyCodeLine{00150\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\&\ event\ :\ \_context.events)\ \{}
\DoxyCodeLine{00151\ \ \ \ \ \textcolor{keyword}{event}.evaluate(\mbox{\hyperlink{structVIPRA_1_1Behaviors_1_1Simpack}{HumanBehavior<pedset\_t,\ map\_t,\ goals\_t>::pack\_t}}\{pedset,\ map,\ goals,\ \_selector.get\_groups(),}
\DoxyCodeLine{00152\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_context,\ dummyState,\ deltaT\});}
\DoxyCodeLine{00153\ \ \ \}}
\DoxyCodeLine{00154\ \}}
\DoxyCodeLine{00155\ }
\DoxyCodeLine{00156\ \textcolor{keyword}{template}\ <Concepts::PedsetModule\ pedset\_t,\ Concepts::MapModule\ map\_t,\ Concepts::GoalsModule\ goals\_t>}
\DoxyCodeLine{00157\ \textcolor{keywordtype}{void}\ HumanBehavior<pedset\_t,\ map\_t,\ goals\_t>::apply\_actions(pedset\_t\&\ pedset,\ map\_t\&\ map,\ goals\_t\&\ goals,}
\DoxyCodeLine{00158\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structVIPRA_1_1State}{VIPRA::State}}\&\ state,\ VIPRA::delta\_t\ deltaT)\ \{}
\DoxyCodeLine{00159\ \ \ GroupsContainer\&\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ groups\ =\ \_selector.get\_groups();}
\DoxyCodeLine{00160\ \ \ \textcolor{keyword}{const}\ VIPRA::size\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ groupCnt\ =\ groups.size();}
\DoxyCodeLine{00161\ \ \ HumanBehavior<pedset\_t,\ map\_t,\ goals\_t>::pack\_t\ pack\{pedset,\ \ \ map,\ \ \ goals,\ \_selector.get\_groups(),}
\DoxyCodeLine{00162\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_context,\ state,\ deltaT\};}
\DoxyCodeLine{00163\ }
\DoxyCodeLine{00164\ \ \ \textcolor{keywordflow}{for}\ (VIPRA::idx\ i\ =\ 0;\ i\ <\ groupCnt;\ ++i)\ \{}
\DoxyCodeLine{00165\ \ \ \ \ \textcolor{keyword}{auto}\&\ pedestrians\ =\ groups[i];}
\DoxyCodeLine{00166\ \ \ \ \ pedestrians.erase(std::remove\_if(pedestrians.begin(),\ pedestrians.end(),}
\DoxyCodeLine{00167\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\&](VIPRA::idx\ ped)\ \{\ return\ goals.is\_goal\_met(ped);\ \}),}
\DoxyCodeLine{00168\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pedestrians.end());}
\DoxyCodeLine{00169\ }
\DoxyCodeLine{00170\ \ \ \ \ std::for\_each(\_actions[i].begin(),\ \_actions[i].end(),\ [\&](\textcolor{keyword}{auto}\&\ action)\ \{}
\DoxyCodeLine{00171\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (action.has\_target())\ \{}
\DoxyCodeLine{00172\ \ \ \ \ \ \ \ \ action.targets()-\/>get\_targets(pack,\ pedestrians,\ \_targets);}
\DoxyCodeLine{00173\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ TODO(rolland):\ this\ needs\ to\ go\ back\ to\ self,\ if\ there\ is\ an\ action\ that\ changes\ it}}
\DoxyCodeLine{00174\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00175\ }
\DoxyCodeLine{00176\ \ \ \ \ \ \ if\ (action.has\_condition())\ \{}
\DoxyCodeLine{00177\ \ \ \ \ \ \ \ \ action.condition()-\/>evaluate(pack,\ pedestrians,\ \_conditionMet,\ \_targets,\ action.duration());}
\DoxyCodeLine{00178\ \ \ \ \ \ \ \ \ action.perform\_action(pack,\ pedestrians,\ \_conditionMet,\ \_targets);}
\DoxyCodeLine{00179\ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00180\ \ \ \ \ \ \ \ \ action.perform\_action(pack,\ pedestrians,\ \_targets);}
\DoxyCodeLine{00181\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00182\ \ \ \ \ \});}
\DoxyCodeLine{00183\ \ \ \}}
\DoxyCodeLine{00184\ \}}
\DoxyCodeLine{00185\ }
\DoxyCodeLine{00186\ \}\ \ \textcolor{comment}{//\ namespace\ VIPRA::Behaviors}}

\end{DoxyCode}
